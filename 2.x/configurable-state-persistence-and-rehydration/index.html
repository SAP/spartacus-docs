<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Configurable State Persistence and Rehydration - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Configurable State Persistence and Rehydration">
<meta property="og:url" content="/spartacus-docs/2.x/configurable-state-persistence-and-rehydration/">












  

  


<link rel="canonical" href="/spartacus-docs/2.x/configurable-state-persistence-and-rehydration/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/2.x/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/2.x/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/2.x/"><img src="/spartacus-docs/2.x/assets/images/logo-blue_64x64.png" alt="Spartacus logo"></a>
        
        <a class="site-title" href="/spartacus-docs/2.x/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/2.x/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/zt-jekftqo0-HP6xt6IF~ffVB2cGG66fcQ" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/2.x/#how-to-obtain-support" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/2.x/release-information/" >Version 2.1</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/"><span class="nav__sub-title">Home</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/getting-started/"><span class="nav__sub-title">Getting Started with Spartacus Libraries</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/dev-guide/"><span class="nav__sub-title">Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/storefront-development-faq/" class="">Storefront Development FAQ</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/spartacus-api/" class="">Spartacus API</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/global-configuration-in-spartacus/" class="">Global Configuration in Spartacus</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/spartacus-features/" class="">Spartacus Features ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/security-best-practices/" class="">Security Best Practices</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/performance/" class="">Performance Optimizations ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/outlets/" class="">Outlets</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/styling-and-page-layout/" class="">Styling and Page Layout ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/customizing-and-extending/" class="">Customizing and Extending Spartacus Features ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/lazy-loading-guide/" class="">Lazy Loading Guide</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/extending-checkout/" class="">Extending Checkout</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/express-checkout/" class="">Express Checkout</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/guest-checkout/" class="">Guest Checkout</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/configurable-routing/" class="">Configurable Routing ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/configuring-base-url/" class="">Configuring the Base URL</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/context-configuration/" class="">Multi-Site Configuration ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/event-service/" class="">Event Service</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/pwa-home/" class="">PWA ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/seo/" class="">SEO ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/i18n/" class="">Internationalization (i18n)</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/a11y/" class="">Accessibility ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/state-management/" class="">State Management ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/smartedit-contract/" class="">SmartEdit Contract in Spartacus</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/customizing-backend-communication/" class="">Customizing Back End Communication ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/global-messages/" class="">Global Messages</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/http-error-handling/" class="">HTTP Error Handling</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/configurable-state-persistence-and-rehydration/" class="active">Configurable State Persistence and Rehydration</a>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/server-side-rendering-in-spartacus/" class="">Server-Side Rendering ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/view-configuration/" class="">View Configuration ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        

                          
                          

                            
                            

                            <li><a href="/spartacus-docs/2.x/user-experience-guidelines/" class="">Customer Experience Guidelines ➢</a>
                                
                                    <ul>
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        

                                          
                                          

                                              
                                        
                                    </ul>
                                
                            </li>     
                        
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/about-tua-spartacus/"><span class="nav__sub-title">Telco & Utilities Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/about-fsa-spartacus/"><span class="nav__sub-title">Financial Services Accelerator Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/2.x/contributors-guide/"><span class="nav__sub-title">Contributing to Spartacus</span></a>
         
        
            <ul>
                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
  </ul>
</nav>      

    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Configurable State Persistence and Rehydration</h1>
    
    <p><strong>Note: Spartacus 2.x is no longer maintained. Please upgrade to the latest version.</strong></p>

<h2 id="storage-synchronization">Storage Synchronization</h2>

<p>Spartacus offers a mechanism to sync NGRX’s store slices to the specified browser’s storage - <code class="language-plaintext highlighter-rouge">localStorage</code> or <code class="language-plaintext highlighter-rouge">sessionStorage</code>.</p>

<h3 id="configuring-storage-synchronization">Configuring storage synchronization</h3>

<p>To configure the synchonization, one needs to provide a config similar to this:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">authStoreConfigFactory</span><span class="p">():</span> <span class="nx">StateConfig</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">StateConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">storageSync</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">keys</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">auth.userToken.token</span><span class="dl">"</span><span class="p">:</span> <span class="nx">StorageSyncType</span><span class="p">.</span><span class="nx">LOCAL_STORAGE</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">ConfigModule</span><span class="p">.</span><span class="nx">withConfigFactory</span><span class="p">(</span><span class="nx">authStoreConfigFactory</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthStoreModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p>In the provided example, the state object with <code class="language-plaintext highlighter-rouge">auth.userToken.token</code> will be synced to the browser’s <code class="language-plaintext highlighter-rouge">localStorage</code>.</p>

<p>In case there is a need to sync multiple slices of the state, just specify the required properties in <code class="language-plaintext highlighter-rouge">storageSync</code>’s <code class="language-plaintext highlighter-rouge">keys</code> config and specify the storage type.</p>

<h3 id="rehydration">Rehydration</h3>

<p>During the startup of the application, Spartacus checks for data stored in either <code class="language-plaintext highlighter-rouge">localStorage</code> or <code class="language-plaintext highlighter-rouge">sessionStorage</code>. If the data exists, Spartacus will use it to rehydrate the state. This is done automatically and there’s no need to configure it.</p>

<h3 id="specifying-the-storage-key-names">Specifying the storage key names</h3>

<p>If one wants to change the default key name(s) for the <code class="language-plaintext highlighter-rouge">localStorage</code> and <code class="language-plaintext highlighter-rouge">sessionStorage</code> (which have the default of <code class="language-plaintext highlighter-rouge">spartacus-local-data</code> and <code class="language-plaintext highlighter-rouge">spartacus-session-data</code>, respectively), they could do it by specifing <code class="language-plaintext highlighter-rouge">localStorageKeyName</code> or <code class="language-plaintext highlighter-rouge">sessionStorageKeyName</code> properties in the config:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">authStoreConfigFactory</span><span class="p">():</span> <span class="nx">StateConfig</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">StateConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">...</span>
      <span class="na">localStorageKeyName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">new-localstorage-name</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">sessionStorageKeyName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">new-sessionstorage-name</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">ConfigModule</span><span class="p">.</span><span class="nx">withConfigFactory</span><span class="p">(</span><span class="nx">authStoreConfigFactory</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthStoreModule</span> <span class="p">{}</span>
</code></pre></div></div>

<h2 id="ssr-transfer-state">SSR Transfer State</h2>

<p>The application runs XHR requests on the server, and then again on the client-side (when the application bootstraps). To prevent unnecessary back end calls for the state that was already populated on the server, we include part of the NgRX state with the server-side rendered HTML.</p>

<p>You can configure the transfer of state for CMS and products (from NgRx store), as shown in the following example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ConfigModule</span><span class="p">.</span><span class="nx">withConfig</span><span class="p">({</span>
  <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ssrTransfer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">keys</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">products</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">cms</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can also narrow the configuration to specific state sub-parts, as shown in the following example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ConfigModule</span><span class="p">.</span><span class="nx">withConfig</span><span class="p">({</span>
  <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ssrTransfer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">keys</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">products</span><span class="p">:</span> <span class="nx">StateTransferType</span><span class="p">.</span><span class="nx">TRANSFER_STATE</span><span class="p">,</span>
        <span class="na">cms</span><span class="p">:</span> <span class="nx">StateTransferType</span><span class="p">.</span><span class="nx">TRANSFER_STATE</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/2.x/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/2.x/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    appId: 'BNZEXRISC6',
    apiKey: '54a795a072ff713045038ee4ad33c990', 
    indexName: 'sap_spartacus', 
    inputSelector: '#docsearch', 
    algoliaOptions: {
      'facetFilters': ["tags:2.x"]
      },
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
