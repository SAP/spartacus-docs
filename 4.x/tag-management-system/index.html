<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Tag Management System - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Tag Management System">
<meta property="og:url" content="/spartacus-docs/4.x/tag-management-system/">












  

  


<link rel="canonical" href="/spartacus-docs/4.x/tag-management-system/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/4.x/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/4.x/assets/css/main.css">
<link rel="stylesheet" href="/spartacus-docs/4.x/assets/css/keys.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/4.x/"><img src="/spartacus-docs/4.x/assets/images/logo-blue_64x64.png" alt="Spartacus logo"></a>
        
        <a class="site-title" href="/spartacus-docs/4.x/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/4.x/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/zt-jekftqo0-HP6xt6IF~ffVB2cGG66fcQ" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/4.x/#how-to-obtain-support" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/4.x/release-information/" >Version 4.2</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/"><span class="nav__sub-title">Home</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/getting-started/"><span class="nav__sub-title">Getting Started with Spartacus Libraries</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/dev-guide/"><span class="nav__sub-title">Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/a11y/">Accessibility ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/spartacus-api/">API</a>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/architecture/">Architecture ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/customizing-and-extending/">Customizing and Extending Spartacus ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/customizing-backend-communication/">Customizing Back End Communication ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/performance/">Performance Optimizations ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/security-best-practices/">Security Best Practices ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/server-side-rendering-in-spartacus/">Server-Side Rendering ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/spartacus-features/">Storefront Features ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                        
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/anonymous-consent/" class="">Anonymous Consent</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/applied-promotions/" class="">Applied Promotions</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/asm/" class="">Assisted Service Module</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/b2b-commerce-organization/" class="">B2B Commerce Organization</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/bulk-pricing/" class="">Bulk Pricing</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/cancellations-and-returns/" class="">Cancellations and Returns</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/cart-import-export/" class="">Cart Import and Export</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/cart-validation/" class="">Cart Validation</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/consignment-tracking/" class="">Consignment Tracking</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/coupons/" class="">Coupons</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/customer-coupons/" class="">Customer Coupons</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/customer-interests/" class="">Customer Interests</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/event-service/" class="">Event Service</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/express-checkout/" class="">Express Checkout</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/guest-checkout/" class="">Guest Checkout</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/image-zoom/" class="">Image Zoom</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/infinite-scroll/" class="">Infinite Scroll</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/inventory-display/" class="">Inventory Display</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/notification-preferences/" class="">Notification Preferences</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/quick-order/" class="">Quick Order</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/saved-cart/" class="">Saved Cart</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/scheduled-replenishment/" class="">Scheduled Replenishment</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/scroll-position-restoration/" class="">Scroll Position Restoration</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/selective-cart/" class="">Selective Cart</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/skip-links/" class="">Skip Links</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/stock-notification/" class="">Stock Notification</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/store-locator/" class="">Store Locator</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/tag-management-system/" class="active">Tag Management System ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                
                                                                                    <li><a href="/spartacus-docs/4.x/tag-management-system-examples/">Tag Management System Examples</a></li>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/text-field-configurator-template/" class="">Text Field Configurator Template</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/variants/" class="">Variants</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/4.x/wish-list/" class="">Wish List</a>


                                                                        
                                                                </li>
                                                            
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/4.x/styling-and-page-layout/">Styling and Page Layout ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                      
                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/using-spartacus/"><span class="nav__sub-title">Using the Spartacus Storefront</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/about-tua-spartacus/"><span class="nav__sub-title">Telco & Utilities Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/about-fsa-spartacus/"><span class="nav__sub-title">Financial Services Accelerator Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/4.x/contributors-guide/"><span class="nav__sub-title">Contributing to Spartacus</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
  </ul>
</nav>      

    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Tag Management System</h1>
    
    
<p><b>Note: </b> 
This feature is introduced with version 3.2 of the Spartacus libraries.
 </p>

<p>The Spartacus tag management system (TMS) allows you to set up a tag manager, and to specify which Spartacus events should be passed to the configured TMS. Both Google Tag Manager (GTM) and Adobe Experience Platform Launch (AEPL) are supported by Spartacus out-of-the-box, while other tag managers can easily be plugged in.</p>

<p>Spartacus supports running multiple tag manager integrations in parallel, and you can decide which events should be collected by each of the supported tag management solutions.</p>

<p><strong>Note:</strong> To work with the Spartacus tag management system, you should also be familiar with the Spartacus events service, which the TMS relies on. For more information, see <a href="/spartacus-docs/4.x/event-service/">Event Service</a>.</p>

<p><strong>Disclaimer</strong></p>

<p><em>The use of tag managers implies the execution of third-party scripts in real time within Spartacus. These scripts may contain malicious payloads. As a result, SAP cannot be held liable or responsible for the content or side effects that may be caused by the execution of third-party scripts within Spartacus. Development teams that are involved in the implementation of tag managers for Spartacus storefronts should consult with business stakeholders to confirm compliance with local privacy and security laws, such as GDPR.</em></p>

<p><em>For more information about third-party script security risks, see the <a href="https://cheatsheetseries.owasp.org/cheatsheets/Third_Party_Javascript_Management_Cheat_Sheet.html">Third Party JavaScript Management Cheat Sheet</a> in the OWASP Cheat Sheet Series.</em></p>

<hr />

<p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#setup" id="markdown-toc-setup">Setup</a></li>
  <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a></li>
  <li><a href="#customization" id="markdown-toc-customization">Customization</a>    <ul>
      <li><a href="#data-layer" id="markdown-toc-data-layer">Data Layer</a></li>
      <li><a href="#events-payload" id="markdown-toc-events-payload">Events Payload</a>        <ul>
          <li><a href="#creating-a-custom-mapper" id="markdown-toc-creating-a-custom-mapper">Creating a Custom Mapper</a></li>
          <li><a href="#creating-custom-events" id="markdown-toc-creating-custom-events">Creating Custom Events</a></li>
          <li><a href="#overriding-mapevents-in-the-tms-service" id="markdown-toc-overriding-mapevents-in-the-tms-service">Overriding mapEvents() in the TMS Service</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="setup">Setup</h2>

<p>If you are working with Google Tag Manager, you can provide the GTM ID through the <code class="language-plaintext highlighter-rouge">gtmId</code> configuration property. Spartacus runs the <em>immediately invoked function expression</em> (IIFE) that is provided by GTM, and this “injects” the GTM script into the DOM. For more details, see the <a href="#configuration">Configuration</a> section, below.</p>

<p>If you are working with Adobe Experience Platform Launch, you can provide the script URL through the <code class="language-plaintext highlighter-rouge">scriptUrl</code> configuration property, and Spartacus will use this URL to “inject” the script into the DOM. For more details, see the <a href="#configuration">Configuration</a> section, below.</p>

<p>If you do not provide any configuration properties, Spartacus assumes that you want to have control over the “injected” scripts, in which case, Spartacus simply starts collecting events and populating the data layer.</p>

<p>Although it is not possible to cover the set up instructions for every existing tag management solution, in many cases, the process requires you to specify a certain <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tag in your <code class="language-plaintext highlighter-rouge">index.html</code>, which loads and bootstraps the TMS. For instance, the following is an example of how GTM is configured:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Google Tag Manager --&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">w</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
    <span class="nx">w</span><span class="p">[</span><span class="nx">l</span><span class="p">].</span><span class="nx">push</span><span class="p">({</span> <span class="dl">"</span><span class="s2">gtm.start</span><span class="dl">"</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span> <span class="na">event</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gtm.js</span><span class="dl">"</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">j</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">),</span>
      <span class="nx">dl</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">dataLayer</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">&amp;l=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">l</span> <span class="p">:</span> <span class="dl">""</span><span class="p">;</span>
    <span class="nx">j</span><span class="p">.</span><span class="k">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">j</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://www.googletagmanager.com/gtm.js?id=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">dl</span><span class="p">;</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
  <span class="p">})(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="dl">"</span><span class="s2">script</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dataLayer</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">GTM-XXXXXXX</span><span class="dl">"</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- End Google Tag Manager --&gt;</span>
</code></pre></div></div>

<p>For see additional setup examples with Google Analytics and AEPL, see <a href="/spartacus-docs/4.x/tag-management-system-examples/">Tag Management System Examples</a>.</p>

<h2 id="configuration">Configuration</h2>

<p>The following TMS configuration options are available:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">debug</code> is a boolean that enables the console log. It should only be enabled in development mode.</li>
  <li><code class="language-plaintext highlighter-rouge">dataLayerProperty</code> is a string that names the data layer object. You only need to provide the <code class="language-plaintext highlighter-rouge">dataLayerProperty</code> if you are not using the default name for the data layer.</li>
  <li><code class="language-plaintext highlighter-rouge">events</code> is an <code class="language-plaintext highlighter-rouge">AbstractType&lt;CxEvent&gt;[]</code> that lists all the event classes that are to be collected and pushed to the data layer.</li>
  <li><code class="language-plaintext highlighter-rouge">collector</code> is a <code class="language-plaintext highlighter-rouge">Type&lt;TmsCollector&gt;</code>, and is the custom collector service implementation.</li>
  <li><code class="language-plaintext highlighter-rouge">gtmId</code> is only available for GTM. When you provide <code class="language-plaintext highlighter-rouge">gtmId</code>, Spartacus handles the script “injection” and bootstrapping for you.</li>
  <li><code class="language-plaintext highlighter-rouge">scriptUrl</code> is only available for AEPL. When you provide <code class="language-plaintext highlighter-rouge">scriptUrl</code>, Spartacus handles the script “injection” and bootstrapping for you.</li>
</ul>

<p>To start collecting events, you need to import the <code class="language-plaintext highlighter-rouge">BaseTmsModule.forRoot()</code>, and provide a configuration. Optionally, you can import the <code class="language-plaintext highlighter-rouge">AepModule</code> or <code class="language-plaintext highlighter-rouge">GtmModule</code> to leverage default configuration in Spartacus.</p>

<p>The following is an example of a full configuration:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">CartAddEntrySuccessEvent</span><span class="p">,</span>
  <span class="nx">CartRemoveEntrySuccessEvent</span><span class="p">,</span>
  <span class="nx">provideConfig</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NavigationEvent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/storefront</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AepModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/tracking/tms/aep</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BaseTmsModule</span><span class="p">,</span> <span class="nx">TmsConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/tracking/tms/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GtmModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/tracking/tms/gtm</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...,</span>
    <span class="nx">BaseTmsModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(),</span>
    <span class="nx">GtmModule</span><span class="p">,</span>
    <span class="nx">AepModule</span><span class="p">,</span>
    <span class="p">...</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...,</span>
    <span class="nx">provideConfig</span><span class="p">({</span>
      <span class="na">tagManager</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">gtm</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">gtmId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GTM-XXXXXXX</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="nx">NavigationEvent</span><span class="p">,</span> <span class="nx">CartAddEntrySuccessEvent</span><span class="p">],</span>
        <span class="p">},</span>
        <span class="na">aep</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">scriptUrl</span><span class="p">:</span> <span class="dl">'</span><span class="s1">//assets.adobedtm.com/xxxxxxx/yyyyyyy/launch-zzzzzzz-development.min.js</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="nx">NavigationEvent</span><span class="p">,</span> <span class="nx">CartRemoveEntrySuccessEvent</span><span class="p">],</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">}</span> <span class="k">as</span> <span class="nx">TmsConfig</span><span class="p">),</span>
  <span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p>In this example, Spartacus is only indicating which events should be collected by each of the configured TMS solutions. In this case, both GTM and AEPL are enabled to run in parallel.</p>

<h2 id="customization">Customization</h2>

<p>The example in the previous section makes use of the default configuration for integrating with both GTM and AEPL, and only includes a minimal amount of custom configuration. However, it is possible to adjust how Spartacus interacts with the data layer, as well as with events, as described in the following sections.</p>

<h3 id="data-layer">Data Layer</h3>

<p>Spartacus uses the standard data layer object names and types for both of the supported tag management system solutions, as follows:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dataLayer: any[]</code> for GTM</li>
  <li><code class="language-plaintext highlighter-rouge">digitalData: {[eventName: string]: any}</code> for AEPL</li>
</ul>

<p>For more information on these standard data layer objects, see the relevant <a href="https://developers.google.com/tag-manager/devguide#datalayer">GTM</a> and <a href="https://experienceleague.adobe.com/docs/analytics/implementation/prepare/data-layer.html?lang=en#setting-data-layer-values">AEPL</a> documentation.</p>

<p>If you use a custom data layer object with the standard data structure, you can configure it using the <code class="language-plaintext highlighter-rouge">dataLayerProperty</code> configuration property.</p>

<p>If you are using a different data layer structure than the standard one, you can write your own collector. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@angular/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CxEvent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@spartacus/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">TmsCollector</span><span class="p">,</span>
  <span class="nx">TmsCollectorConfig</span><span class="p">,</span>
  <span class="nx">WindowObject</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@spartacus/tracking/tms/core</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">({</span> <span class="na">providedIn</span><span class="p">:</span> <span class="dl">"</span><span class="s2">root</span><span class="dl">"</span> <span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyCollectorService</span> <span class="k">implements</span> <span class="nx">TmsCollector</span> <span class="p">{</span>
  <span class="nx">init</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">TmsCollectorConfig</span><span class="p">,</span> <span class="nb">window</span><span class="p">:</span> <span class="nx">WindowObject</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">myDataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">myDataLayer</span> <span class="o">??</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="nx">pushEvent</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">CxEvent</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="nx">config</span><span class="p">:</span> <span class="nx">TmsCollectorConfig</span><span class="p">,</span>
    <span class="nb">window</span><span class="p">:</span> <span class="nx">WindowObject</span><span class="p">,</span>
    <span class="nx">event</span><span class="p">:</span> <span class="nx">T</span> <span class="o">|</span> <span class="kr">any</span>
  <span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">myDataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>After you have written your collector, you configure it, as shown in the following example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">BaseTmsModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">({</span>
  <span class="na">tagManager</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">gtm</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">collector</span><span class="p">:</span> <span class="nx">MyCollectorService</span><span class="p">,</span>
      <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="nx">NavigationEvent</span><span class="p">,</span> <span class="nx">CartAddEntrySuccessEvent</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">}),</span>
</code></pre></div></div>

<h3 id="events-payload">Events Payload</h3>

<p>Depending on which TMS client you are working with, the requirements for an event’s payload can vary a lot. The default event payloads in Spartacus are intended to match the requirements for the most typical use cases. However, if the defaults do not meet your needs, you can re-map or adjust the payloads in a few different ways, as described in the following sections.</p>

<h4 id="creating-a-custom-mapper">Creating a Custom Mapper</h4>

<p>To create a custom mapper for a specific TMS solution, you can create a custom collector (as shown in the <a href="#data-layer">Data Layer</a> section, above), and then implement the <code class="language-plaintext highlighter-rouge">map</code> method, as shown in the following example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@angular/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CxEvent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@spartacus/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">TmsCollector</span><span class="p">,</span>
  <span class="nx">TmsCollectorConfig</span><span class="p">,</span>
  <span class="nx">WindowObject</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@spartacus/tracking/tms/core</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">({</span> <span class="na">providedIn</span><span class="p">:</span> <span class="dl">"</span><span class="s2">root</span><span class="dl">"</span> <span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyCollectorService</span> <span class="k">implements</span> <span class="nx">TmsCollector</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="nx">map</span><span class="p">?</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">CxEvent</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">T</span> <span class="o">|</span> <span class="nx">object</span> <span class="p">{</span>
    <span class="c1">// TODO: custom mapping logic goes here...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In the <code class="language-plaintext highlighter-rouge">map</code> method, you can use the <code class="language-plaintext highlighter-rouge">instanceof</code> check to indicate which events should be re-mapped. If you find this logic becoming too complex, you can inject other services to your <code class="language-plaintext highlighter-rouge">MyCollectorService</code>, as needed.</p>

<h4 id="creating-custom-events">Creating Custom Events</h4>

<p>You can create a custom event in Spartacus and re-map the data to fit your data structure requirements simply by registering a new event source, as described in <a href="/spartacus-docs/4.x/event-service/#registering-event-sources">Registering Event Sources</a>. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">eventSource</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">NavigationEvent</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
  <span class="nx">map</span><span class="p">((</span><span class="nx">navigationEvent</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">createFrom</span><span class="p">(</span><span class="nx">CustomNavigationEvent</span><span class="p">,</span> <span class="p">{</span>
      <span class="c1">// the next lines are example logic, not necessarily the actual page name and type</span>
      <span class="na">pageName</span><span class="p">:</span> <span class="nx">navigationEvent</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">pageType</span><span class="p">:</span> <span class="nx">navigationEvent</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="kd">type</span><span class="p">,</span>
    <span class="p">})</span>
  <span class="p">)</span>
<span class="p">);</span>

<span class="nx">eventService</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">CustomEvent</span><span class="p">,</span> <span class="nx">eventSource</span><span class="p">);</span>
</code></pre></div></div>

<p>In the example above, the Spartacus <code class="language-plaintext highlighter-rouge">NavigationEvent</code> is re-mapped to a <code class="language-plaintext highlighter-rouge">CustomNavigationEvent</code>. If you need to pull additional data, see <a href="/spartacus-docs/4.x/event-service/#pulling-additional-data-from-facades">Pulling Additional Data From Facades</a> for more information.</p>

<p><strong>Note:</strong> To bootstrap the logic, you need to inject your <code class="language-plaintext highlighter-rouge">CustomNavigationEventBuilder</code> somewhere, such as in a dummy module that is being imported, for example, to the <code class="language-plaintext highlighter-rouge">AppModule</code>.</p>

<p>If you use this approach, you need to pass your <code class="language-plaintext highlighter-rouge">CustomNavigationEvent</code> to the relevant config array (such as <code class="language-plaintext highlighter-rouge">tagManager.gtm.events</code> or <code class="language-plaintext highlighter-rouge">tagManager.aep.events</code>), instead of the default <code class="language-plaintext highlighter-rouge">NavigationEvent</code>.</p>

<h4 id="overriding-mapevents-in-the-tms-service">Overriding mapEvents() in the TMS Service</h4>

<p>If you wish to enrich all Spartacus events with some common data, you can do so by overriding <code class="language-plaintext highlighter-rouge">mapEvents()</code> in the <code class="language-plaintext highlighter-rouge">TmsService</code>.</p>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<table BORDER="0"><tr><td class="tdfooter"><a href="https://www.sap.com/copyright" target="_blank">Copyright</a></td>

<td class="tdfooter"><a href="https://sap.github.io/spartacus-docs/privacy-statement/">Privacy Statement</a></td>

<td class="tdfooter"><a href="https://www.sap.com/impressum" target="_blank">Legal Disclosure</a></td>

<td class="tdfooter"><a href="https://www.sap.com/trademark" target="_blank">Trademark</a></td>

<td class="tdfooter"><a href="https://www.sap.com/terms-of-use" target="_blank">Terms of Use</a></td></tr></table>
<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/4.x/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/4.x/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    appId: 'BNZEXRISC6',
    apiKey: '54a795a072ff713045038ee4ad33c990', 
    indexName: 'sap_spartacus', 
    inputSelector: '#docsearch', 
    searchParameters: {
      facetFilters: ['tags:4.x']
      },
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
