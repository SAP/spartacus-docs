<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Loader Meta Reducer (DRAFT) - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Loader Meta Reducer (DRAFT)">
<meta property="og:url" content="/spartacus-docs/1.x/loader-meta-reducer/">












  

  


<link rel="canonical" href="/spartacus-docs/1.x/loader-meta-reducer/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/1.x/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/1.x/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/1.x/"><img src="/spartacus-docs/1.x/assets/images/logo-blue_64x64.png" alt=""></a>
        
        <a class="site-title" href="/spartacus-docs/1.x/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/1.x/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/enQtNDM1OTI3OTMwNjU5LTg1NGVjZmFkZjQzODc1MzFhMjc3OTZmMzIzYzg0YjMwODJiY2YxYjA5MTE5NjVmN2E5NjMxNjEzMGNlMDRjMjU" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="https://stackoverflow.com/questions/tagged/spartacus-storefront" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/1.x/release-information/" >Version 1.5</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Home</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/" class="">About Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/release-information/" class="">Release Information ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-videos/" class="">Spartacus Videos</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-roadmap/" class="">Spartacus Roadmap</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-faq/" class="">Spartacus FAQ</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/docs-archive/" class="">Documentation Archive</a>
 
              

                
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting Started with Spartacus Libraries</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/installing-sap-commerce-cloud/" class="">Installing SAP Commerce Cloud for use with Spartacus ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/cors/" class="">Cross-Origin Resource Sharing (CORS)</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/building-the-spartacus-storefront-from-libraries/" class="">Building the Spartacus Storefront from Libraries</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/recommended-development-environment/" class="">Recommended Development Environment</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/snapshot-builds/" class="">Snapshot Builds</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configuring-feature-flags/" class="">Configuring Feature Flags</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/smartEdit-setup-instructions-for-spartacus/" class="">SmartEdit Setup Instructions for Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/personalization-setup-instructions-for-spartacus/" class="">Personalization Setup Instructions for Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacussampledataaddon/" class="">Spartacussampledataaddon AddOn</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/integrations/" class="">Integrations ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Storefront Development Guide</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/storefront-development-faq/" class="">Storefront Development FAQ</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-api/" class="">Spartacus API</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/global-configuration-in-spartacus/" class="">Global Configuration in Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-features/" class="">Spartacus Features ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/security-best-practices/" class="">Security Best Practices</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/performance/" class="">Performance Optimizations ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/outlets/" class="">Outlets</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/styling-and-page-layout/" class="">Styling and Page Layout ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/customizing-and-extending/" class="">Customizing and Extending Spartacus Features ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/extending-checkout/" class="">Extending Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/express-checkout/" class="">Express Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/guest-checkout/" class="">Guest Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configurable-routing/" class="">Configurable Routing ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configuring-base-url/" class="">Configuring the Base URL</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/context-configuration/" class="">Multi-Site Configuration ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/pwa-home/" class="">PWA ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/seo/" class="">SEO ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/i18n/" class="">Internationalization (i18n)</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/state-management/" class="">State Management ➢</a>
 
              

              
                <ul>
                  
                    
                      
                        

                          
                          

                          
                          
      
                          <li><a href="/spartacus-docs/1.x/loader-meta-reducer/" class="active">Loader Meta Reducer</a></li>
                    
                         
                       
                     

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/smartedit-contract/" class="">SmartEdit Contract in Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/customizing-backend-communication/" class="">Customizing Back End Communication ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/global-messages/" class="">Global Messages</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/http-error-handling/" class="">HTTP Error Handling</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configurable-state-persistence-and-rehydration/" class="">Configurable State Persistence and Rehydration</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/server-side-rendering-in-spartacus/" class="">Server-Side Rendering ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/view-configuration/" class="">View Configuration ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/user-experience-guidelines/" class="">User Experience Guidelines ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Contributing to Spartacus</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/contributors-guide/" class="">Contributor's Guide ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Loader Meta Reducer (DRAFT)</h1>
    
    <h2 id="overview">Overview</h2>

<p>To give better feedback to users, based on their actions, we often have to keep information such as “cart is loading”, “fetching user address failed”, and so on.
For every separate application state, we have to keep that meta data beside. Separate for cart, user information, product data and so on. Implementing this logic in all of these places manually would result in having different solutions to the same problem across the codebase.
That’s why in spartacus <code class="language-plaintext highlighter-rouge">loaderReducer</code> was created. This reducer standardizes meta data handling in the whole state tree.
You are able to use it on any depth of the tree, wherever you need it. Apart from the reducer, we also provide utilities for actions and selectors.</p>

<h2 id="applying-the-meta-reducer">Applying the Meta Reducer</h2>

<p>Wrapping part of state tree with loader utility is quite simple:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">loaderReducer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CART_DATA</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">[Cart] Cart Data</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">getReducers</span><span class="p">():</span> <span class="nx">ActionReducerMap</span><span class="o">&lt;</span><span class="nx">CartsState</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">active</span><span class="p">:</span> <span class="nx">loaderReducer</span><span class="o">&lt;</span><span class="nx">CartState</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">CART_DATA</span><span class="p">,</span> <span class="nx">cartReducer</span><span class="p">),</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To <code class="language-plaintext highlighter-rouge">loaderReducer</code> you have to provide unique identifier. In case above it is <code class="language-plaintext highlighter-rouge">CART_DATA</code> variable.
This identifier will also be used in actions to connect each action to specific state tree.</p>

<p>For keeping simple state (one property), you don’t have to provide reducer. Loader success action will set <code class="language-plaintext highlighter-rouge">value</code> with passed payload.</p>

<h2 id="defining-the-state-interface">Defining the State Interface</h2>

<p>To correctly set type definitions on your state use <code class="language-plaintext highlighter-rouge">LoaderState</code> interface.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">LoaderState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CART_FEATURE</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">cart</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">StateWithCart</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">CART_FEATURE</span><span class="p">]:</span> <span class="nx">CartsState</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">CartsState</span> <span class="p">{</span>
  <span class="nl">active</span><span class="p">:</span> <span class="nx">LoaderState</span><span class="o">&lt;</span><span class="nx">CartState</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">CartState</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="nx">Cart</span><span class="p">;</span>
  <span class="nl">entries</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="na">code</span><span class="p">:</span> <span class="nx">string</span><span class="p">]:</span> <span class="nx">OrderEntry</span> <span class="p">};</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="creating-actions">Creating Actions</h2>

<p>To manipulate meta data for loading states <code class="language-plaintext highlighter-rouge">loading</code>, <code class="language-plaintext highlighter-rouge">success</code> or <code class="language-plaintext highlighter-rouge">error</code>, actions created should extend loaders actions. It is very important to extend those actions or make sure to set proper meta on action (preferably using provided meta helpers).
In case all of your actions implements standard <code class="language-plaintext highlighter-rouge">Action</code>, loader flags won’t work correctly.</p>

<p>Example below will describe it the best:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">StateLoaderActions</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="c1">// action's result</span>
<span class="c1">// - `loading` flag =&gt; true</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">LoadCart</span> <span class="kd">extends</span> <span class="nx">StateLoaderActions</span><span class="p">.</span><span class="nx">LoaderLoadAction</span> <span class="p">{</span>
  <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">LOAD_CART</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="p">{</span> <span class="nl">userId</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nl">cartId</span><span class="p">:</span> <span class="nx">string</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">CART_DATA</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// action's result</span>
<span class="c1">// - `error` flag =&gt; (provided error) || true</span>
<span class="c1">// - `loading` flag =&gt; false</span>
<span class="c1">// - `success` flag =&gt; false</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">LoadCartFail</span> <span class="kd">extends</span> <span class="nx">StateLoaderActions</span><span class="p">.</span><span class="nx">LoaderFailAction</span> <span class="p">{</span>
  <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">LOAD_CART_FAIL</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">CART_DATA</span><span class="p">,</span> <span class="nx">payload</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// action's result</span>
<span class="c1">// - `success` flag =&gt; true</span>
<span class="c1">// - `loading` flag =&gt; false</span>
<span class="c1">// - `error` flag =&gt; false</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">LoadCartSuccess</span> <span class="kd">extends</span> <span class="nx">StateLoaderActions</span><span class="p">.</span><span class="nx">LoaderSuccessAction</span> <span class="p">{</span>
  <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">LOAD_CART_SUCCESS</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">payload</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">CART_DATA</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// action's result</span>
<span class="c1">// - `loading` flag =&gt; false</span>
<span class="c1">// - `error` flag =&gt; false</span>
<span class="c1">// - `success` flag =&gt; false</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ClearCart</span> <span class="kd">extends</span> <span class="nx">StateLoaderActions</span><span class="p">.</span><span class="nx">LoaderResetAction</span> <span class="p">{</span>
  <span class="nx">readonly</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">CLEAR_CART</span><span class="p">;</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">CART_DATA</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="working-with-selectors">Working With Selectors</h2>

<p>Applying loader reducer changes state shape with additional flags and <code class="language-plaintext highlighter-rouge">value</code> which contains wrapped state.
Because of that <code class="language-plaintext highlighter-rouge">ngrx</code> selectors needs to be adjusted. Spartacus provides utility functions for extracting <code class="language-plaintext highlighter-rouge">value</code> key or meta data (<code class="language-plaintext highlighter-rouge">loading</code>, <code class="language-plaintext highlighter-rouge">error</code>, <code class="language-plaintext highlighter-rouge">success</code>).</p>

<p>Available functions:</p>

<ul>
  <li>loaderValueSelector</li>
  <li>loaderLoadingSelector</li>
  <li>loaderErrorSelector</li>
  <li>loaderSuccessSelector</li>
</ul>

<p>Example selectors from cart feature that makes use of those utility functions:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">StateLoaderSelectors</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getCartsState</span><span class="p">:</span> <span class="nx">MemoizedSelector</span><span class="o">&lt;</span>
  <span class="nx">StateWithCart</span><span class="p">,</span>
  <span class="nx">CartsState</span>
<span class="o">&gt;</span> <span class="o">=</span> <span class="nx">createFeatureSelector</span><span class="o">&lt;</span><span class="nx">CartsState</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">CART_FEATURE</span><span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getActiveCartState</span><span class="p">:</span> <span class="nx">MemoizedSelector</span><span class="o">&lt;</span>
  <span class="nx">StateWithCart</span><span class="p">,</span>
  <span class="nx">LoaderState</span><span class="o">&lt;</span><span class="nx">CartState</span><span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="o">=</span> <span class="nx">createSelector</span><span class="p">(</span>
  <span class="nx">getCartsState</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">cartsState</span><span class="p">:</span> <span class="nx">CartsState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">cartsState</span><span class="p">.</span><span class="nx">active</span>
<span class="p">);</span>


<span class="k">export</span> <span class="kd">const</span> <span class="nx">getCartState</span><span class="p">:</span> <span class="nx">MemoizedSelector</span><span class="o">&lt;</span>
  <span class="nx">StateWithCart</span><span class="p">,</span>
  <span class="nx">CartState</span>
<span class="o">&gt;</span> <span class="o">=</span> <span class="nx">createSelector</span><span class="p">(</span>
  <span class="nx">getActiveCartState</span><span class="p">,</span>
  <span class="nx">state</span> <span class="o">=&gt;</span> <span class="nx">StateLoaderSelectors</span><span class="p">.</span><span class="nx">loaderValueSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getCartLoaded</span><span class="p">:</span> <span class="nx">MemoizedSelector</span><span class="o">&lt;</span>
  <span class="nx">StateWithCart</span><span class="p">,</span>
  <span class="nx">boolean</span>
<span class="o">&gt;</span> <span class="o">=</span> <span class="nx">createSelector</span><span class="p">(</span>
  <span class="nx">getActiveCartState</span><span class="p">,</span>
  <span class="nx">state</span> <span class="o">=&gt;</span>
    <span class="nx">StateLoaderSelectors</span><span class="p">.</span><span class="nx">loaderSuccessSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="o">!</span><span class="nx">StateLoaderSelectors</span><span class="p">.</span><span class="nx">loaderLoadingSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="o">!</span><span class="nx">StateLoaderSelectors</span><span class="p">.</span><span class="nx">loaderValueSelector</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">refresh</span>
<span class="p">);</span>
</code></pre></div></div>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/1.x/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/1.x/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    apiKey: 'a80d5313e9ea5b00e5004f69b9c090e9', 
    indexName: 'sap-spartacus', 
    inputSelector: '#docsearch', 
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
