<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Using Loading Scopes (DRAFT) - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Using Loading Scopes (DRAFT)">
<meta property="og:url" content="/spartacus-docs/1.x/loading-scopes/">












  

  


<link rel="canonical" href="/spartacus-docs/1.x/loading-scopes/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/1.x/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/1.x/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/1.x/"><img src="/spartacus-docs/1.x/assets/images/logo-blue_64x64.png" alt="Spartacus logo"></a>
        
        <a class="site-title" href="/spartacus-docs/1.x/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/1.x/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/zt-jekftqo0-HP6xt6IF~ffVB2cGG66fcQ" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/1.x/#how-to-obtain-support" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/1.x/release-information/" >Version 1.5</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Home</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/" class="">About Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/release-information/" class="">Release Information ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-videos/" class="">Spartacus Videos</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-roadmap/" class="">Spartacus Roadmap</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-faq/" class="">Spartacus FAQ</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/docs-archive/" class="">Documentation Archive</a>
 
              

                
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting Started with Spartacus Libraries</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/installing-sap-commerce-cloud/" class="">Installing SAP Commerce Cloud for use with Spartacus ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/cors/" class="">Cross-Origin Resource Sharing (CORS)</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/building-the-spartacus-storefront-from-libraries/" class="">Building the Spartacus Storefront from Libraries</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/recommended-development-environment/" class="">Recommended Development Environment</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/browser-support/" class="">Web Browser Support</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/snapshot-builds/" class="">Snapshot Builds</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configuring-feature-flags/" class="">Configuring Feature Flags</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/smartEdit-setup-instructions-for-spartacus/" class="">SmartEdit Setup Instructions for Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/personalization-setup-instructions-for-spartacus/" class="">Personalization Setup Instructions for Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacussampledataaddon/" class="">Spartacussampledataaddon AddOn</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/integrations/" class="">Integrations ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Storefront Development Guide</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/storefront-development-faq/" class="">Storefront Development FAQ</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-api/" class="">Spartacus API</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/global-configuration-in-spartacus/" class="">Global Configuration in Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/spartacus-features/" class="">Spartacus Features ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/security-best-practices/" class="">Security Best Practices</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/performance/" class="">Performance Optimizations ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/outlets/" class="">Outlets</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/styling-and-page-layout/" class="">Styling and Page Layout ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/customizing-and-extending/" class="">Customizing and Extending Spartacus Features ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/extending-checkout/" class="">Extending Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/express-checkout/" class="">Express Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/guest-checkout/" class="">Guest Checkout</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configurable-routing/" class="">Configurable Routing ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configuring-base-url/" class="">Configuring the Base URL</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/context-configuration/" class="">Multi-Site Configuration ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/pwa-home/" class="">PWA ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/seo/" class="">SEO ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/i18n/" class="">Internationalization (i18n)</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/state-management/" class="">State Management ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/smartedit-contract/" class="">SmartEdit Contract in Spartacus</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/customizing-backend-communication/" class="">Customizing Back End Communication ➢</a>
 
              

              
                <ul>
                  
                    
                      
                        

                          
                          

                          
                          
      
                          <li><a href="/spartacus-docs/1.x/loading-scopes/" class="active">Using Loading Scopes</a></li>
                    
                         

                          
                          

                          
                          
      
                          <li><a href="/spartacus-docs/1.x/connecting-to-other-systems/" class="">Connecting to Other Systems</a></li>
                    
                         
                       
                     

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/global-messages/" class="">Global Messages</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/http-error-handling/" class="">HTTP Error Handling</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/configurable-state-persistence-and-rehydration/" class="">Configurable State Persistence and Rehydration</a>
 
              

                
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/server-side-rendering-in-spartacus/" class="">Server-Side Rendering ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/view-configuration/" class="">View Configuration ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                 </ul>
                 
             </li>
           
            
            

            
            

            <li><a href="/spartacus-docs/1.x/user-experience-guidelines/" class="">Customer Experience Guidelines ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Contributing to Spartacus</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/spartacus-docs/1.x/contributors-guide/" class="">Contributor's Guide ➢</a>
 
              

              
                <ul>
                  
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                    

                     
                   
                 </ul>
                 
             </li>
           
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Using Loading Scopes (DRAFT)</h1>
    
    
<p><b>Note: </b> 
This feature is introduced with version 1.4 of the Spartacus libraries.
 </p>

<p>Product data payload is usually huge and required in multiple places, like the Product Detail Page, items in Product Carousels, etc. 
Not all places need complete product payload, breaking product payload into pieces (called scopes), allows to specify which part of the payload is actually needed in a specific case.</p>

<p>Currently, Spartacus supports scopes for loading product data.</p>

<h2 id="using-default-product-scopes">Using default Product Scopes</h2>

<p>By default, Spartacus uses few predefined scopes. The list includes (but is not limited to):</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">enum</span> <span class="nx">ProductScope</span> <span class="p">{</span>
  <span class="nx">LIST</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">DETAILS</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">details</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">ATTRIBUTES</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">attributes</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">VARIANTS</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">variants</span><span class="dl">'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can (and should) take advantage of those scopes when getting product data:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">DETAILS</span><span class="p">)</span> <span class="c1">// get minimal product data, suitable for listing, carousel items, etc.</span>
<span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">DETAILS</span><span class="p">)</span> <span class="c1">// get detailed product data, suitable for using in product details page or for generating json-ld schema</span>
</code></pre></div></div>

<h2 id="configuring-payload-for-scopes">Configuring Payload for Scopes</h2>

<p>When using Occ Products Adapter you can configure scope payloads using <code class="language-plaintext highlighter-rouge">fields</code> parameter in the endpoint configuration, under <code class="language-plaintext highlighter-rouge">product_scopes</code> key:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">backend:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">occ:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">endpoints:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">product_scopes:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">list:</span><span class="w"> </span><span class="err">'products/$</span><span class="p">{</span><span class="err">productCode</span><span class="p">}</span><span class="err">?fields=code</span><span class="p">,</span><span class="err">name</span><span class="p">,</span><span class="err">summary</span><span class="p">,</span><span class="err">price(formattedValue)</span><span class="p">,</span><span class="err">images(DEFAULT</span><span class="p">,</span><span class="err">galleryIndex)'</span><span class="p">,</span><span class="w">
          </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
          </span><span class="err">attributes:</span><span class="w"> </span><span class="err">'products/$</span><span class="p">{</span><span class="err">productCode</span><span class="p">}</span><span class="err">?fields=classifications'</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Spartacus will preprocess those fields to optimize backend calls, especially to limit the number of calls, if more that one scope will be requested at the same time.
To make backend requests as optimal as possible fields description should be as specific as possible, using aliases like <code class="language-plaintext highlighter-rouge">BASIC</code>, <code class="language-plaintext highlighter-rouge">DEFAULT</code> or <code class="language-plaintext highlighter-rouge">FULL</code> should ideally be avoided.</p>

<h2 id="defining-custom-loading-scope">Defining Custom Loading Scope</h2>

<p>Defining custom product scopes is very simple and straightforward. To add new scope just add new endpoint configuration with specified fields parameter:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">backend:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">occ:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">endpoints:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">product_scopes:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">price:</span><span class="w"> </span><span class="err">'products/$</span><span class="p">{</span><span class="err">productCode</span><span class="p">}</span><span class="err">?fields=price(FULL)'</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It will result in a new <code class="language-plaintext highlighter-rouge">price</code> scope being available.</p>

<p>With this, you can use your new scope by just passing its name. For example, to get price data for the product using the above configuration just do:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>Custom scopes work in the same way as default ones, i.e. can be merged, included, can have maxAge specified, etc.</p>

<h2 id="merging-of-scopes">Merging of Scopes</h2>

<p>In some scenarios, it’s beneficial to get data for more than one scope at the same time.</p>

<p>You can do it passing an array of scopes to <code class="language-plaintext highlighter-rouge">productService.get</code> method like below:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProductScope</span><span class="p">.</span><span class="nx">DETAILS</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">ATTRIBUTES</span><span class="p">])</span> <span class="c1">// with return product payload with merged data for both scopes</span>
</code></pre></div></div>

<p>Using this you should expect multiple emissions in certain scenarios that could contain partial payloads initially, as observable will instantly deliver data for all scopes that are loaded and will lazy load the missing ones. 
Partial payloads for each scope will be merged into one payload respecting the order in which scopes were provided. This means, that if scopes payloads overlap, then the scope that was specified later can overwrite parts of payload provided earlier. 
It’s always more optimal to provide scope definitions that don’t overlap with each other but it’s perfectly fine to not do as long as you are aware of the merging order.</p>

<h2 id="scope-inclusions">Scope Inclusions</h2>

<p>It’s possible to define scope inclusions, let’s assume that:
1) we have the <code class="language-plaintext highlighter-rouge">list</code> scope, that contains only minimal data
2) we have the <code class="language-plaintext highlighter-rouge">details</code> scope that contains product details including data available in list scope</p>

<p>Using inclusion will allow as to load additional detailed data if the list scope was already loaded. One simple use case would be navigating to PDP from clicking on the carousel item. We already have basic product data available which we can display instantly and we only need to request for missing details.</p>

<p>It’s possible to make it work by:
1) removing payload parts from details scope if they are covered by list scope
2) including list scope in details scope, like below:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">backend:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">loadingScopes:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">product:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">details:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">include:</span><span class="w"> </span><span class="p">[</span><span class="err">'list'</span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>With this configuration you will always get an optimal call, for example:</p>

<ol>
  <li>if only list scope will be required, only list scope will be loaded</li>
  <li>if details scope will be required, list and details scope will be loaded in one network request</li>
  <li>if defails scope will be required and list scope will be already available, only data from details scope will be loaded</li>
</ol>

<p>Payload defined for main scope (<code class="language-plaintext highlighter-rouge">details</code> in the above example) will always take precedence when merging scopes, meaning that if one of the included scopes (<code class="language-plaintext highlighter-rouge">list</code>) contains the same payload parts as <code class="language-plaintext highlighter-rouge">details</code> it will be effectively overwritten by data from <code class="language-plaintext highlighter-rouge">details</code>.
It’s possible to provide more than one scope in <code class="language-plaintext highlighter-rouge">include</code> array configuration and those scopes will be merged using the same rules and order as described in <strong>Merging of Scopes</strong>.</p>

<h2 id="defining-maxage-for-the-scope">Defining maxAge for the Scope</h2>

<p>Using loading scopes allows loading only part of the data that we need and load it efficiently, which usually means only once per session / context change. 
For data that should be kept fresh and reloaded more often, you can use <code class="language-plaintext highlighter-rouge">maxAge</code> parameter that will take care of data reloads when it becomes obsolete.</p>

<p><code class="language-plaintext highlighter-rouge">maxAge</code> should be specified in seconds and can be defined for a scope like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">backend:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">loadingScopes:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">product:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">list:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">maxAge:</span><span class="w"> </span><span class="mi">60</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This configuration will result in a <code class="language-plaintext highlighter-rouge">list</code> scope reload as soon as it becomes older than 60 seconds.</p>

<p>Reload will only take place, when scope will be “in use”, more specifically when some code will be subscribed to that data scope, which usually means that the data from the scope is currently used on a page.</p>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/1.x/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/1.x/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    apiKey: 'b6583768751462c6ee53d5a5720cda44', 
    indexName: 'sap_spartacus', 
    inputSelector: '#docsearch', 
    algoliaOptions: {
      'facetFilters': ["tags:1.x"]
      },
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
