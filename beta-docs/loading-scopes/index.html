<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Loading Scopes - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Loading Scopes">
<meta property="og:url" content="/spartacus-docs/beta-docs/loading-scopes/">












  

  


<link rel="canonical" href="/spartacus-docs/beta-docs/loading-scopes/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/beta-docs/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/beta-docs/assets/css/main.css">
<link rel="stylesheet" href="/spartacus-docs/beta-docs/assets/css/keys.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/beta-docs/"><img src="/spartacus-docs/beta-docs/assets/images/logo-blue_64x64.png" alt="Spartacus logo"></a>
        
        <a class="site-title" href="/spartacus-docs/beta-docs/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/beta-docs/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/zt-jekftqo0-HP6xt6IF~ffVB2cGG66fcQ" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/beta-docs/#how-to-obtain-support" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/beta-docs/release-information/" >Version 5.0</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/"><span class="nav__sub-title">Home</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/getting-started/"><span class="nav__sub-title">Getting Started with Spartacus Libraries</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/dev-guide/"><span class="nav__sub-title">Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/a11y/">Accessibility ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/spartacus-api/">API</a>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/architecture/">Architecture ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/customizing-and-extending/">Customizing and Extending Spartacus ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/customizing-backend-communication/">Customizing Back End Communication ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                        
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/beta-docs/connecting-to-other-systems/" class="">Connecting to Other Systems</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/beta-docs/loading-scopes/" class="active">Loading Scopes</a>


                                                                        
                                                                </li>
                                                            
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/performance/">Performance Optimizations ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/security-best-practices/">Security Best Practices ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/server-side-rendering-in-spartacus/">Server-Side Rendering ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/spartacus-features/">Storefront Features ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/beta-docs/styling-and-page-layout/">Styling and Page Layout ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                      
                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/using-spartacus/"><span class="nav__sub-title">Using the Spartacus Storefront</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/about-tua-spartacus/"><span class="nav__sub-title">Telco & Utilities Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/about-fsa-spartacus/"><span class="nav__sub-title">Financial Services Accelerator Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/beta-docs/contributors-guide/"><span class="nav__sub-title">Contributing to Spartacus</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
  </ul>
</nav>      

    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Loading Scopes</h1>
    
    
<p><b>Note: </b> 
This feature is introduced with version 1.4 of the Spartacus libraries.
 </p>

<p>When Spartacus requests product data from the back end, the payload that is returned is often very large, and may be required in multiple places, such as in product carousels, the product details page, and so on. However, the complete payload is not necessarily required in all of these places. By breaking the payload into pieces, which we call <em>scopes</em>, you can specify which part of the payload is actually needed for each particular case.</p>

<p>Spartacus currently supports scopes for the loading of product data.</p>

<hr />

<p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#using-default-product-scopes" id="markdown-toc-using-default-product-scopes">Using Default Product Scopes</a></li>
  <li><a href="#configuring-the-payload-for-scopes" id="markdown-toc-configuring-the-payload-for-scopes">Configuring the Payload for Scopes</a></li>
  <li><a href="#defining-custom-loading-scopes" id="markdown-toc-defining-custom-loading-scopes">Defining Custom Loading Scopes</a></li>
  <li><a href="#merging-scopes" id="markdown-toc-merging-scopes">Merging Scopes</a></li>
  <li><a href="#scope-inclusions" id="markdown-toc-scope-inclusions">Scope Inclusions</a></li>
  <li><a href="#keeping-scope-data-up-to-date" id="markdown-toc-keeping-scope-data-up-to-date">Keeping Scope Data Up To Date</a></li>
  <li><a href="#reloading-triggers" id="markdown-toc-reloading-triggers">Reloading Triggers</a></li>
</ul>

<hr />

<h2 id="using-default-product-scopes">Using Default Product Scopes</h2>

<p>By default, Spartacus uses a number of predefined scopes. The predefined scopes include, but are not limited to, the following:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">enum</span> <span class="nx">ProductScope</span> <span class="p">{</span>
  <span class="nx">LIST</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">DETAILS</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">details</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">ATTRIBUTES</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">attributes</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">VARIANTS</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">variants</span><span class="dl">'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It is recommended that you take advantage of these scopes when retrieving product data. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">LIST</span><span class="p">)</span> <span class="c1">// retrieves minimal product data, suitable for listing, carousel items, etc.</span>
<span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">DETAILS</span><span class="p">)</span> <span class="c1">// retrieves detailed product data, suitable for using in the product details page or for generating json-ld schema</span>
</code></pre></div></div>

<h2 id="configuring-the-payload-for-scopes">Configuring the Payload for Scopes</h2>

<p>When you are working with the Spartacus <code class="language-plaintext highlighter-rouge">OccProductAdapter</code>, you can configure scope payloads by using the <code class="language-plaintext highlighter-rouge">fields</code> parameter in the endpoint configuration, under the <code class="language-plaintext highlighter-rouge">backend.occ.endpoints.product</code> key. The following is an example:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">backend</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">occ</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">endpoints</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">product</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">list</span><span class="p">:</span> <span class="dl">'</span><span class="s1">products/${productCode}?fields=code,name,summary,price(formattedValue),images(DEFAULT,galleryIndex)</span><span class="dl">'</span><span class="p">,</span>
          <span class="c1">// ...</span>
          <span class="na">attributes</span><span class="p">:</span> <span class="dl">'</span><span class="s1">products/${productCode}?fields=classifications</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Spartacus  preprocesses these fields to optimize calls to the back end, especially to limit the number of calls if more that one scope is requested at the same time.</p>

<p>Ideally, <code class="language-plaintext highlighter-rouge">fields</code> descriptions should be as specific as possible, and aliases such as <code class="language-plaintext highlighter-rouge">BASIC</code>, <code class="language-plaintext highlighter-rouge">DEFAULT</code> and <code class="language-plaintext highlighter-rouge">FULL</code> should be avoided, where possible.</p>

<h2 id="defining-custom-loading-scopes">Defining Custom Loading Scopes</h2>

<p>You define a custom product scope by adding a new endpoint configuration with the specified <code class="language-plaintext highlighter-rouge">fields</code> parameter. In the following example, a new <code class="language-plaintext highlighter-rouge">price</code> scope is defined and made available:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">backend</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">occ</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">endpoints</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">product</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">price</span><span class="p">:</span> <span class="dl">'</span><span class="s1">products/${productCode}?fields=price(FULL)</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With this configuration, you can now use your new scope simply by passing its name. For example, you can get price data for the product as follows:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>Custom scopes work in the same way as default ones, which means they can be merged, included, have a specified <code class="language-plaintext highlighter-rouge">maxAge</code>, and so on.</p>

<h2 id="merging-scopes">Merging Scopes</h2>

<p>In some scenarios, it is beneficial to get data for more than one scope at the same time.</p>

<p>You can do this by passing an array of scopes to the <code class="language-plaintext highlighter-rouge">productService.get</code> method. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">productService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProductScope</span><span class="p">.</span><span class="nx">DETAILS</span><span class="p">,</span> <span class="nx">ProductScope</span><span class="p">.</span><span class="nx">ATTRIBUTES</span><span class="p">])</span> <span class="c1">// returns a product payload with merged data for both scopes</span>
</code></pre></div></div>

<p>With this example, you should expect multiple emissions that, in certain cases, could initially contain partial payloads, because the observable instantly delivers data for all scopes that are loaded, and lazy loads the missing ones.</p>

<p>Partial payloads for each scope are merged into one payload according to the order in which the scopes were provided. If scope payloads overlap, then the scope that was specified later in the array can overwrite parts of the payload that were provided earlier. It is always preferable to provide scope definitions that do not overlap with each other, but it is certainly acceptable to provide scope definitions that do overlap, as long as you are aware of the merging order.</p>

<h2 id="scope-inclusions">Scope Inclusions</h2>

<p>Scope inclusions allow you to optimize the loading of data from multiple scopes. This can be illustrated with the following example:</p>

<ul>
  <li>you have the <code class="language-plaintext highlighter-rouge">list</code> scope, which contains only minimal data</li>
  <li>you have the <code class="language-plaintext highlighter-rouge">details</code> scope, which contains product details, including data that is available in the <code class="language-plaintext highlighter-rouge">list</code> scope</li>
</ul>

<p>Scope inclusion allows you to load additional, detailed data if the <code class="language-plaintext highlighter-rouge">list</code> scope is already loaded. One simple use case is navigating to the product details page after clicking on a carousel item. You already have the basic product data available, which can be displayed instantly, and you only need to make a request for the missing details.</p>

<p>This is handled by removing payload parts from the <code class="language-plaintext highlighter-rouge">details</code> scope if they are already covered by the <code class="language-plaintext highlighter-rouge">list</code> scope, and by including the <code class="language-plaintext highlighter-rouge">list</code> scope in the <code class="language-plaintext highlighter-rouge">details</code> scope, as shown in the following example:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">backend</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loadingScopes</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">product</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">details</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">include</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This configuration always results in an optimal call, as follows:</p>

<ul>
  <li>If only the <code class="language-plaintext highlighter-rouge">list</code> scope is required, only the <code class="language-plaintext highlighter-rouge">list</code> scope is loaded.</li>
  <li>If the <code class="language-plaintext highlighter-rouge">details</code> scope is required, the <code class="language-plaintext highlighter-rouge">list</code> scope and the <code class="language-plaintext highlighter-rouge">details</code> scope are both loaded in one network request.</li>
  <li>If the <code class="language-plaintext highlighter-rouge">details</code> scope is required and the <code class="language-plaintext highlighter-rouge">list</code> scope is already available, only data from the <code class="language-plaintext highlighter-rouge">details</code> scope is loaded.</li>
</ul>

<p>The payload that is defined for the main scope (in this case, the <code class="language-plaintext highlighter-rouge">details</code> scope) always takes precedence when merging scopes. This means that if one of the included scopes (in this case, the <code class="language-plaintext highlighter-rouge">list</code> scope) contains the same payload parts as the <code class="language-plaintext highlighter-rouge">details</code> scope, it will be effectively overwritten by data from the <code class="language-plaintext highlighter-rouge">details</code> scope.</p>

<p>It is possible to provide more than one scope in the <code class="language-plaintext highlighter-rouge">include</code> array configuration, and those scopes are merged according to the same rules and order as described in <a href="#merging-scopes">Merging Scopes</a>.</p>

<h2 id="keeping-scope-data-up-to-date">Keeping Scope Data Up To Date</h2>

<p>Working with scopes allows you to load only the part of the data that you need, and to load it efficiently, which usually means only once per session or context change. For data that should be kept fresh and reloaded more often, you can use the <code class="language-plaintext highlighter-rouge">maxAge</code> parameter to take care of data reloads when the data becomes obsolete.</p>

<p>The <code class="language-plaintext highlighter-rouge">maxAge</code> is specified in seconds, and can be defined for a scope as shown in the following example:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">backend</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loadingScopes</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">product</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">list</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">maxAge</span><span class="p">:</span> <span class="mi">60</span>
        <span class="p">}</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This configuration results in a <code class="language-plaintext highlighter-rouge">list</code> scope that reloads as soon as it becomes older than 60 seconds.</p>

<p>A reload only takes place when the scope is “in use”, which is to say, when a certain piece of code is subscribed to that data scope. In many cases, this is when the data from the scope is actually being used on a page.</p>

<h2 id="reloading-triggers">Reloading Triggers</h2>

<p>The <code class="language-plaintext highlighter-rouge">reloadOn</code> configuration allows you to reload a product when a specific event occurs. The following is an example:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">backend</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loadingScopes</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">product</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">details</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">reloadOn</span><span class="p">:</span> <span class="p">[</span><span class="nx">MyEvent</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In this example, the <code class="language-plaintext highlighter-rouge">details</code> scope is reloaded when <code class="language-plaintext highlighter-rouge">MyEvent</code> is emitted.</p>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<table BORDER="0"><tr><td class="tdfooter"><a href="https://www.sap.com/copyright" target="_blank">Copyright</a></td>

<td class="tdfooter"><a href="https://sap.github.io/spartacus-docs/privacy-statement/">Privacy Statement</a></td>

<td class="tdfooter"><a href="https://www.sap.com/impressum" target="_blank">Legal Disclosure</a></td>

<td class="tdfooter"><a href="https://www.sap.com/trademark" target="_blank">Trademark</a></td>

<td class="tdfooter"><a href="https://www.sap.com/terms-of-use" target="_blank">Terms of Use</a></td></tr></table>
<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/beta-docs/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/beta-docs/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    appId: 'BNZEXRISC6',
    apiKey: '54a795a072ff713045038ee4ad33c990', 
    indexName: 'sap_spartacus', 
    inputSelector: '#docsearch', 
    algoliaOptions: {
      'facetFilters': ["tags:beta-docs"]
      },
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
