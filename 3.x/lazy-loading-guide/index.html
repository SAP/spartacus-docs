<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Lazy Loading - Spartacus Documentation</title>
<meta name="description" content="SAP Spartacus JavaScript Storefront Documentation.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Spartacus Documentation">
<meta property="og:title" content="Lazy Loading">
<meta property="og:url" content="/spartacus-docs/3.x/lazy-loading-guide/">












  

  


<link rel="canonical" href="/spartacus-docs/3.x/lazy-loading-guide/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": null,
      "url": null,
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/spartacus-docs/3.x/feed.xml" type="application/atom+xml" rel="alternate" title="Spartacus Documentation Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/spartacus-docs/3.x/assets/css/main.css">
<link rel="stylesheet" href="/spartacus-docs/3.x/assets/css/keys.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert scripts for adding anchor links to headers -->

<script src="https://kit.fontawesome.com/82d5a2bf2f.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.add();
</script>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  </head>

  <body class="layout--home">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/spartacus-docs/3.x/"><img src="/spartacus-docs/3.x/assets/images/logo-blue_64x64.png" alt="Spartacus logo"></a>
        
        <a class="site-title" href="/spartacus-docs/3.x/">Spartacus Documentation</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/spartacus-docs/3.x/docs-archive/" >Doc Archive</a>
            </li><li class="masthead__menu-item">
              <a href="https://join.slack.com/t/spartacus-storefront/shared_invite/zt-jekftqo0-HP6xt6IF~ffVB2cGG66fcQ" >Feedback</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/3.x/#how-to-obtain-support" >Support</a>
            </li><li class="masthead__menu-item">
              <a href="/spartacus-docs/3.x/release-information/" >Version 3.4</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/"><span class="nav__sub-title">Home</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/getting-started/"><span class="nav__sub-title">Getting Started with Spartacus Libraries</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/dev-guide/"><span class="nav__sub-title">Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/a11y/">Accessibility ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/spartacus-api/">API</a>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/architecture/">Architecture ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                        
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/configurable-routing/" class="">Configurable Routing ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/configurable-state-persistence-and-rehydration/" class="">Configurable State Persistence and Rehydration</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/configuring-base-url/" class="">Configuring the Base URL</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/type-augmentation/" class="">Extending Built-In Models</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/global-configuration-in-spartacus/" class="">Global Configuration in Spartacus</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/global-messages/" class="">Global Messages</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/http-error-handling/" class="">HTTP Error Handling</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/lazy-loading-guide/" class="active">Lazy Loading</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/context-configuration/" class="">Multi-Site Configuration ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/pwa-home/" class="">PWA ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/seo/" class="">SEO ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/session-management/" class="">Session Management</a>


                                                                        
                                                                </li>
                                                            

                                                              
                                                              
                                                            
                                                              
                                                              

                                                                
                                                                <li><a href="/spartacus-docs/3.x/state-management/" class="">State Management ➢</a>


                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                    

                                                                      
                                                                      

                                                                        
                                                                            <ul>
                                                                                  
                                                                            </ul>
                                                                        
                                                                        
                                                                </li>
                                                            
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/customizing-and-extending/">Customizing and Extending Spartacus ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/customizing-backend-communication/">Customizing Back End Communication ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/performance/">Performance Optimizations ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/security-best-practices/">Security Best Practices ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/server-side-rendering-in-spartacus/">Server-Side Rendering ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/spartacus-features/">Storefront Features ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                    

                                      
                                      

                                        <li><a href="/spartacus-docs/3.x/styling-and-page-layout/">Styling and Page Layout ➢</a>
                                            
                                                <ul>
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                          
                                                    
                                                </ul>
                                              
                                        </li>
                                      
                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/using-spartacus/"><span class="nav__sub-title">Using the Spartacus Storefront</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/about-tua-spartacus/"><span class="nav__sub-title">Telco & Utilities Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/about-fsa-spartacus/"><span class="nav__sub-title">Financial Services Accelerator Storefront Development Guide</span></a>
         
        
            <ul>
                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    
                                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
      <li>
        
          
          

         <a href="/spartacus-docs/3.x/contributors-guide/"><span class="nav__sub-title">Contributing to Spartacus</span></a>
         
        
            <ul>
                
                        <ul>
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                                    

                                  
                            
                        </ul>
   
                    

                    

                
                        <ul>
                            
                        </ul>
   
                    

                    

                
            </ul>  
      </li>          
    
  </ul>
</nav>      

    
  
  </div>


  <div class="archive">
    
      <h1 id="page-title" class="page__title">Lazy Loading</h1>
    
    <p>Lazy loading, also known as code splitting, lets you divide your JavaScript code into multiple chunks. The result is that you do not have to load all the JavaScript of the full application when a user accesses the first page. Instead, only the chunks that are required for the given page are loaded. While navigating the storefront, additional chunks are loaded when needed.</p>

<p>Such an approach can substantially improve “Time To Interactive”, especially in the case of complex web applications being accessed by low-end mobile devices.</p>

<hr />

<p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#spartacus-approach-to-lazy-loading" id="markdown-toc-spartacus-approach-to-lazy-loading">Spartacus Approach to Lazy Loading</a></li>
  <li><a href="#general-concepts" id="markdown-toc-general-concepts">General Concepts</a>    <ul>
      <li><a href="#defining-dynamic-imports-only-in-the-main-application" id="markdown-toc-defining-dynamic-imports-only-in-the-main-application">Defining Dynamic Imports Only in the Main Application</a></li>
      <li><a href="#avoiding-static-imports-for-lazy-loaded-code" id="markdown-toc-avoiding-static-imports-for-lazy-loaded-code">Avoiding Static Imports for Lazy-Loaded Code</a></li>
      <li><a href="#configuration-in-lazy-loaded-modules" id="markdown-toc-configuration-in-lazy-loaded-modules">Configuration in Lazy-Loaded Modules</a>        <ul>
          <li><a href="#unified-configuration" id="markdown-toc-unified-configuration">Unified Configuration</a></li>
        </ul>
      </li>
      <li><a href="#providers-in-lazy-loaded-modules" id="markdown-toc-providers-in-lazy-loaded-modules">Providers in Lazy-Loaded Modules</a>        <ul>
          <li><a href="#unified-injector" id="markdown-toc-unified-injector">Unified Injector</a></li>
        </ul>
      </li>
      <li><a href="#avoiding-importing-the-httpclientmodule-in-your-lazy-loaded-modules" id="markdown-toc-avoiding-importing-the-httpclientmodule-in-your-lazy-loaded-modules">Avoiding Importing the HttpClientModule in Your Lazy-Loaded Modules</a></li>
    </ul>
  </li>
  <li><a href="#lazy-loading-of-cms-components" id="markdown-toc-lazy-loading-of-cms-components">Lazy Loading of CMS Components</a>    <ul>
      <li><a href="#configuration-of-lazy-loading-cms-components" id="markdown-toc-configuration-of-lazy-loading-cms-components">Configuration of Lazy Loading CMS Components</a></li>
      <li><a href="#technical-details" id="markdown-toc-technical-details">Technical Details</a></li>
    </ul>
  </li>
  <li><a href="#lazy-loading-of-modules" id="markdown-toc-lazy-loading-of-modules">Lazy Loading of Modules</a>    <ul>
      <li><a href="#configuration-of-lazy-loaded-modules" id="markdown-toc-configuration-of-lazy-loaded-modules">Configuration of Lazy-Loaded Modules</a></li>
      <li><a href="#component-mapping-configuration-in-lazy-loaded-modules" id="markdown-toc-component-mapping-configuration-in-lazy-loaded-modules">Component Mapping Configuration in Lazy-Loaded Modules</a></li>
      <li><a href="#defining-shared-dependency-modules" id="markdown-toc-defining-shared-dependency-modules">Defining Shared-Dependency Modules</a></li>
      <li><a href="#combined-injector" id="markdown-toc-combined-injector">Combined Injector</a></li>
      <li><a href="#initializing-lazy-loaded-modules" id="markdown-toc-initializing-lazy-loaded-modules">Initializing Lazy Loaded Modules</a></li>
    </ul>
  </li>
  <li><a href="#preparing-libraries-to-work-with-lazy-loading" id="markdown-toc-preparing-libraries-to-work-with-lazy-loading">Preparing Libraries to Work with Lazy Loading</a>    <ul>
      <li><a href="#providing-fine-grained-entry-points-in-your-library" id="markdown-toc-providing-fine-grained-entry-points-in-your-library">Providing Fine-Grained Entry Points in Your Library</a></li>
      <li><a href="#separating-static-code-from-lazy-loaded-code" id="markdown-toc-separating-static-code-from-lazy-loaded-code">Separating Static Code from Lazy-Loaded Code</a></li>
      <li><a href="#wrapping-library-code-in-a-lazy-loaded-module" id="markdown-toc-wrapping-library-code-in-a-lazy-loaded-module">Wrapping Library Code in a Lazy-Loaded Module</a></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="spartacus-approach-to-lazy-loading">Spartacus Approach to Lazy Loading</h2>

<p>Code splitting is a technique that has to be done at application build time. Code splitting provided by Angular is typically route-based, which means there is a chunk for the landing page, another chunk for the product page, and so on. Since Spartacus is mostly CMS driven, the actual application logic for each route cannot be decided at build time. Business users will eventually alter the page structure by introducing or removing components. This is why an alternative approach to lazy loading is required, which Spartacus provides in the following ways:</p>

<ul>
  <li>Lazy loading of CMS components</li>
  <li>CMS-driven lazy loading of feature modules</li>
</ul>

<h2 id="general-concepts">General Concepts</h2>

<p>The following sections offer some important information about how lazy loading works in Spartacus.</p>

<h3 id="defining-dynamic-imports-only-in-the-main-application">Defining Dynamic Imports Only in the Main Application</h3>

<p>Dynamic imports, a technique that is used to facilitate lazy loading and that also allows code splitting, can only be used in the main application. It is not possible to define dynamic imports in the prebuilt libraries.</p>

<p>This is an unfortunate limitation, which results in some application code that must be added by customers. Although the amount of custom code is limited to the bare minimum, we’ll add a feature in a future version of the schematics library to automatically add lazy-loaded modules.</p>

<h3 id="avoiding-static-imports-for-lazy-loaded-code">Avoiding Static Imports for Lazy-Loaded Code</h3>

<p>To make code spitting possible, your static JavaScript code (the main app bundle) should not have any static imports to code that you want to lazy load. The builder will notice that the code is already included, and as a result, will not generate a separate chunk for it. This is especially important in the case of importing symbols from libraries.</p>

<p>At the time of writing (Angular 9 and Angular 10), mixing static imports with dynamic imports for the same library entry point, even for distinct symbols, will break lazy loading and tree shaking for this library entry point. If you were to do this, it would statically include the entire entry point in the build. For this reason, it is highly recommended that you create specific entry point for the code that has to be loaded statically, and separate entry points for the code that can be loaded lazily.</p>

<h3 id="configuration-in-lazy-loaded-modules">Configuration in Lazy-Loaded Modules</h3>

<p><b>Note: </b> 
This functionality is introduced with version 3.0 of the Spartacus libraries.
 </p>

<p>If additional configuration is provided inside the lazy-loaded module, Spartacus merges it into the global application configuration to support lazy loading scenarios for existing components and services. In most cases, especially when lazy-loaded modules provide mostly default configurations, this works reliably. However, it can cause problems if it is overused, especially when two modules provide different configurations for the same part of the config. Scenarios such as these can be fixed by providing the necessary overrides in the main app.</p>

<p>This merging functionality is made possible by a compatibility mechanism that is enabled by default, but you can disable it with the <code class="language-plaintext highlighter-rouge">disableConfigUpdates</code> feature flag. If you are developing new modules that have to hook into configurations from lazy-loaded modules, you should use the <code class="language-plaintext highlighter-rouge">ConfigurationService.unifiedConfig$</code> instead. This functionality is described in the following section.</p>

<h4 id="unified-configuration">Unified Configuration</h4>

<p>Unified configuration provides a way to get a global configuration that includes both the root configuration and the configuration from already-loaded lazy-loaded modules.</p>

<p>The <code class="language-plaintext highlighter-rouge">ConfigurationService.unifiedConfig$</code> exposes the unified configuration as an observable that emits the new configuration each time it changes. This happens, for example, every time a lazy-loaded module with a provided configuration is loaded and instantiated.</p>

<p>All configuration parts are merged in a strict order, where the actual configuration always overrides the default one, and the configuration defined in the root module (that is, the app shell) has precedence.</p>

<p>The following is an example that shows the order in which different configurations provided in the root app and in two lazy-loaded modules are merged, where each subsequent item in the list can override the previous one:</p>

<ul>
  <li>default root configuration</li>
  <li>default configuration from lazy-loaded module 1</li>
  <li>default configuration from lazy-loaded module 2</li>
  <li>configuration from lazy-loaded module 1</li>
  <li>configuration from lazy-loaded module 2</li>
  <li>root configuration (always takes precedence)</li>
</ul>

<h3 id="providers-in-lazy-loaded-modules">Providers in Lazy-Loaded Modules</h3>

<p>Injection tokens provided in lazy-loaded modules are not visible to services provided in the root application. This applies especially to multi-provided tokens, such as <code class="language-plaintext highlighter-rouge">HttpInterceptors</code>, various handlers, and so on.</p>

<p>To mitigate this drawback, some Spartacus features, such as the <code class="language-plaintext highlighter-rouge">PageMetaService</code> (which consumes <code class="language-plaintext highlighter-rouge">PageMetaResolver</code> tokens), or the <code class="language-plaintext highlighter-rouge">ConverterService</code> (which mostly consumes adapter serializers and normalizers), use the unified injector under the hood. In doing so, they have access to lazy-loaded tokens and can leverage them for global features.</p>

<p>For mechanisms that do not rely on the unified injector (for example, functionality from most non-Spartacus libraries, such as the core Angular libraries), it is recommended that you always eager load modules with these kinds of tokens.</p>

<p>For more information about eager loading, see the <a href="https://angular.io/guide/glossary#eager-loading">Angular documentation glossary</a>.</p>

<h4 id="unified-injector">Unified Injector</h4>

<p>The unified injector provides a way to inject a token, or multi-provided tokens, while taking into account the root injector and the injectors from lazy-loaded features. The injector exposes an observable that emits a new set of injectables for a specified token each time the status of the unified injector changes.</p>

<h3 id="avoiding-importing-the-httpclientmodule-in-your-lazy-loaded-modules">Avoiding Importing the HttpClientModule in Your Lazy-Loaded Modules</h3>

<p>In general, the <code class="language-plaintext highlighter-rouge">HttpClientModule</code> should be imported in the root application, not in the library. For example, if you import it inside a lazy-loaded library, all injectors from the root library will be invisible to HTTP calls originating from the lazy-loaded module.</p>

<p>Although technically it is possible to import the <code class="language-plaintext highlighter-rouge">HttpClientModule</code> in the library, in most cases it is not something that is expected, and it might cause errors that are difficult to explain, so please keep this in mind.</p>

<h2 id="lazy-loading-of-cms-components">Lazy Loading of CMS Components</h2>

<p><b>Note: </b> 
This feature is introduced with version 2.0 of the Spartacus libraries.
 </p>

<h3 id="configuration-of-lazy-loading-cms-components">Configuration of Lazy Loading CMS Components</h3>

<p>Lazy loading of CMS code is achieved by specifying a dynamic import in place of a statically-referenced components class in the CMS Mapping configuration. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">cmsComponents</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">SimpleResponsiveBannerComponent</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">component</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./lazy/lazy.component</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">m</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LazyComponent</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>For more information on CMS mapping, see <a href="/spartacus-docs/3.x/customizing-cms-components/">Customizing CMS Components</a>.</p>

<h3 id="technical-details">Technical Details</h3>

<p>Support for dynamic imports in CMS component mapping is implemented using customizable component handlers (specifically, the <code class="language-plaintext highlighter-rouge">LazyComponentHandler</code>).</p>

<p>It is possible to extend this handler to customize its behavior, to add special hooks, or different triggers, or to implement a completely new handler that can optionally reuse existing ones.</p>

<h2 id="lazy-loading-of-modules">Lazy Loading of Modules</h2>

<p><b>Note: </b> 
This feature is introduced with version 2.1 of the Spartacus libraries.
 </p>

<p>CMS-driven lazy loading of feature modules allows the following:</p>

<ul>
  <li>Lazy loading not only component code, but also the core part (including NgRx state)</li>
  <li>Loading a feature only once, when first needed</li>
  <li>Providing shared, lazy-loaded dependency modules</li>
</ul>

<p>Lazy loading of the feature module is triggered by the CMS requesting a component when the implementation is covered by the relevant feature configuration.</p>

<h3 id="configuration-of-lazy-loaded-modules">Configuration of Lazy-Loaded Modules</h3>

<p>Configuration of the feature involves the following aspects:</p>

<ul>
  <li>The dynamic import of the feature module (which has to be defined in main application)</li>
  <li>
    <p>The information about what CMS components are covered by a specific feature (which can become part of the library and imported statically). This information is provided as an array of strings under the <code class="language-plaintext highlighter-rouge">cmsComponents</code> key. The following is an example:</p>

    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">featureModules</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">organization</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">module</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
        <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">@spartacus/my-account/organization</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
          <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">OrganizationModule</span>
        <span class="p">),</span>
      <span class="na">cmsComponents</span><span class="p">:</span> <span class="p">[</span>
        <span class="dl">'</span><span class="s1">OrderApprovalListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManageBudgetsListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManageCostCentersListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManagePermissionsListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManageUnitsListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManageUserGroupsListComponent</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">ManageUsersListComponent</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="component-mapping-configuration-in-lazy-loaded-modules">Component Mapping Configuration in Lazy-Loaded Modules</h3>

<p>Default CMS mapping configuration in lazy-loaded modules should be defined in exactly the same fashion as in statically-imported ones.</p>

<p>Spartacus is able to extract a CMS component mapping configuration from a lazy-loaded feature and use it to resolve component classes and factories covered by the feature. That is why it is possible and recommended to use the standard way of providing the default CMS mapping configuration inside a lazy-loaded module. As a result, the exact same module and library entry point can be imported dynamically or statically, depending on the needs, and it is still possible to overwrite a lazy-loaded CMS configuration from the application level by providing configuration overrides in the application.</p>

<h3 id="defining-shared-dependency-modules">Defining Shared-Dependency Modules</h3>

<p>It is possible to extract some logic to a shared, lazy-loaded module that can be defined as a lazy-loaded dependency for a feature module by providing an array of dynamic imports in the <code class="language-plaintext highlighter-rouge">dependencies</code> property of the feature configuration. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">featureModules</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">organization</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">module</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
        <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">@spartacus/my-account/organization</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
          <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">OrganizationModule</span>
        <span class="p">),</span>
      <span class="na">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">()</span> <span class="o">=&gt;</span>
          <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">@spartacus/storefinder/core</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
            <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">OrganizationModule</span>
          <span class="p">),</span>
        <span class="c1">// ,,</span>
      <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Such unnamed dependency modules are instantiated only once, when lazy loading the first feature that depends on it. Its providers contribute to the combined injector that is passed to the feature module, and as a result, all feature services and components have access to the services provided by the dependency modules.</p>

<h3 id="combined-injector">Combined Injector</h3>

<p>Any lazy-loaded module can inject (that is, have access to) services and tokens from the root application injector and the dependency modules injectors. This is possible because of the <code class="language-plaintext highlighter-rouge">CombinedInjector</code> that is created each time the feature module with dependencies is instantiated.</p>

<p>When a CMS component that is covered by a lazy-loaded module is instantiated, it can inject (that is, have access to) services from the following:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">ModuleInjector</code> hierarchy, starting from the feature module injector, and including dependency modules and the root injector</li>
  <li>The <code class="language-plaintext highlighter-rouge">ElementInjector</code> hierarchy, which is created implicitly at each DOM element</li>
</ul>

<h3 id="initializing-lazy-loaded-modules">Initializing Lazy Loaded Modules</h3>

<p><b>Note: </b> 
This functionality is introduced with version 3.2 of the Spartacus libraries.
 </p>

<p>Spartacus provides a <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> that should be used instead of the Angular <code class="language-plaintext highlighter-rouge">APP_INITIALIZER</code> for initializing lazy-loaded modules. The <code class="language-plaintext highlighter-rouge">APP_INITIALIZER</code> mechanism finishes initializing the application before any lazy loading occurs, so lazy-loaded features that may need to run initialization logic when they are loaded are unable to do so.</p>

<p>The <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> injection token can be used to provide initialization functions in modules that are intended to be lazy loaded. The <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> is supported by the Spartacus lazy loading mechanism, and as a result, initialization functions that are provided using the <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> will run just before the module they are defined in is lazy loaded.</p>

<p>You configure a <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> in the same way that you would configure an <code class="language-plaintext highlighter-rouge">APP_INITIALIZER</code>. The following is an example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">MODULE_INITIALIZER</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@spartacus/core</span><span class="dl">'</span><span class="p">;</span>

<span class="p">...</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">myFactoryFunction</span><span class="p">(</span>
  <span class="nx">dependencyOne</span><span class="p">:</span> <span class="nx">DependencyOne</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// add initialization logic here</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="nx">MODULE_INITIALIZER</span><span class="p">,</span>
      <span class="na">useFactory</span><span class="p">:</span> <span class="nx">myFactoryFunction</span><span class="p">,</span>
      <span class="na">deps</span><span class="p">:</span> <span class="p">[</span><span class="nx">DependencyOne</span><span class="p">],</span>
      <span class="na">multi</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyLazyLoadedModule</span> <span class="p">{}</span>

</code></pre></div></div>

<p>Although the primary use case for the <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> is to run when a module is lazy loaded, the <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> function still runs if the module it is defined in is configured to be loaded eagerly (that is, loaded when the app starts, which is the default method for importing modules). If an eager-loading configuration is applied on a module that is designed for lazy loading, the <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> functions are run during the Angular app bootstrap sequence.</p>

<p>An initialization function that is provided by the <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> only runs when the module is loaded. This means that if a module is lazy loaded, the initialization function will run before the module is loaded, but it will not run when the app is initialized. If a module is configured for eager loading, the initialization function will only run when the app is initialized.</p>

<p>If any of the initialization functions returns a promise, app initialization or module loading does not complete until the promise is resolved. If one promise is rejected, the app initialization or the module loading is interrupted. If an initialization function throws an error, the app initialization or module loading is also interrupted.</p>

<p>If a feature needs to apply initialization logic at the moment the app is loaded, feature libraries can still use the regular <code class="language-plaintext highlighter-rouge">APP_INITIALIZER</code> in their <code class="language-plaintext highlighter-rouge">@spartacus/{featurename}/root</code> entry point, which by convention is an entry point that is always eager loaded.</p>

<p><strong>Note:</strong> The <code class="language-plaintext highlighter-rouge">MODULE_INITIALIZER</code> is a feature of the Spartacus lazy loading mechanism. It will not work for other lazy loading mechanisms, such as the default route-based lazy loading from Angular.</p>

<h2 id="preparing-libraries-to-work-with-lazy-loading">Preparing Libraries to Work with Lazy Loading</h2>

<h3 id="providing-fine-grained-entry-points-in-your-library">Providing Fine-Grained Entry Points in Your Library</h3>

<p>Mixing static and dynamic imports from the same entry points breaks lazy loading and affects tree shaking, so any library that will be used directly in dynamic imports should expose fine-grained secondary entry points to optimize code splitting.</p>

<p>As a convention, Spartacus exposes root entry points for features, such as <code class="language-plaintext highlighter-rouge">@spartacus/orgainzation/administration/root</code>. This type of entry point contains all of the code that should not or cannot be lazy loaded. Modules from the root entry point should be imported statically in the root application, which means they will be eager loaded and will be available in the main application chunk.</p>

<p>For more information about support for secondary entry points in the Angular libraries, see <a href="https://github.com/ng-packagr/ng-packagr/blob/master/docs/secondary-entrypoints.md">Secondary Entry Points</a> in the ng-packagr documentation on GitHub.</p>

<h3 id="separating-static-code-from-lazy-loaded-code">Separating Static Code from Lazy-Loaded Code</h3>

<p>When you work with Angular Dependency Injection, the list of providers in the injector should not change after the injector is initialized. This paradigm specifically applies to any multi-provided tokens, to handlers, and especially to any Angular-native multi-provided tokens, such as <code class="language-plaintext highlighter-rouge">HTTP_INTERCEPTOR</code>, <code class="language-plaintext highlighter-rouge">APP_INITIALIZER</code>, and so on.</p>

<p>The result is that any multi-provided token in a lazy-loaded module will not be visible to modules and services that are provided in the root, or in other lazy-loaded chunks, with the exception of multi-provided tokens that are injected using the unified injector.</p>

<p>Some Spartacus features, such as <code class="language-plaintext highlighter-rouge">PageMetaService</code> or <code class="language-plaintext highlighter-rouge">ConverterService</code>, use the <code class="language-plaintext highlighter-rouge">UnifiedInjector</code> to be aware of tokens that can be lazy loaded, so that the global logic (such as SEO features) can work reliably even if the logic is lazy loaded with the feature. For example, the store locator page meta resolver can be lazy loaded with the store locator feature.</p>

<p>The Spartacus configuration, which is also defined by providing configuration chunks, is treated a bit differently because of a compatibility mechanism that contributes configurations from lazy loading features to the global configuration. This mechanism can be disabled by a feature flag, and will be turned off by default in the future, in favor of the unified configuration feature.</p>

<p>If there are issues with lazy-loaded providers not being visible by the root services, it is always possible to include this kind of code in a statically-linked module that is available upfront. It is recommended to create a separate entry point in your library (by convention, named <code class="language-plaintext highlighter-rouge">root</code>, such as <code class="language-plaintext highlighter-rouge">my-library/root</code>) that contains minimal code, that will be included in the main bundle, and that will be available from the beginning.</p>

<h3 id="wrapping-library-code-in-a-lazy-loaded-module">Wrapping Library Code in a Lazy-Loaded Module</h3>

<p>To address some specific customizations on top of a lazy-loaded library, it is possible to wrap static imports from one or more libraries into a single module that will be imported dynamically instead. This technique can also be an effective optimization strategy, because the builder will be able to use tree shaking for all of the static imports inside the module.</p>


<!-- <h3 class="archive__subtitle">Recent posts</h3>




 -->

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="docsearch-container"><input type="search" id="docsearch" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." /></div>
    <!-- <div id="results" class="results"></div> --></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/spartacus-docs/3.x/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Spartacus Documentation. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> -->

      </footer>
    </div>

    
  <script src="/spartacus-docs/3.x/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> 
    <script type="text/javascript"> docsearch({ 
    apiKey: 'b6583768751462c6ee53d5a5720cda44', 
    indexName: 'sap_spartacus', 
    inputSelector: '#docsearch', 
    algoliaOptions: {
      'facetFilters': ["tags:3.x"]
      },
    debug: false // Set debug to true if you want to inspect the dropdown 
    }); 
    </script> 

    <script>
      anchors.options = {
      visible: 'hover',
      icon: "\uf0c1"
      };
    anchors.add();
    </script>

    </body>
</html>
